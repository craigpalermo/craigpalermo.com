{
  "componentChunkName": "component---src-templates-blog-post-js",
  "path": "/building-this-site-with-github-actions/",
  "result": {
    "data": {
      "site": { "id": "Site", "siteMetadata": { "title": "Craig's Blog" } },
      "markdownRemark": {
        "id": "a8453af1-41c9-5c7a-b0d8-89b42e540555",
        "excerpt": "Yesterday, I was making some updates to this site and noticed that the process to publish updates was somewhat tedious.\nIn order to publish a change, I would…",
        "html": "<p>Yesterday, I was making some updates to this site and noticed that the process to publish updates was somewhat tedious.\nIn order to publish a change, I would need to manually run <code class=\"language-text\">npm run build</code>, commit and push the changes, then\nreturn the the GitHub repo’s settings to change the custom domain for GitHub pages back to <code class=\"language-text\">craigpalermo.com</code>. For\nsome reason, this kept resetting each time I pushed changes to the <code class=\"language-text\">docs</code> folder. I figured it had something to do\nwith the fact that I was serving the site from a custom directory, but I wasn’t sure exactly why.</p>\n<p>For reference, here’s my GitHub Pages config to use a custom domain, building from a folder on <code class=\"language-text\">master</code>:</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/c4bef497c55e97e92d8b3632688d362c/78363/gh_pages.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 84.7568988173456%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAABYlAAAWJQFJUiTwAAACSElEQVQ4y52UC4+bMBCE8/9/W9VWOlVN2wskBEh4mZfBNmCmY5PL6a7X9lqiT+uYaNc7s86uKAqEYYgoivB4OEBpjf95VvdZV+zGcULTKnSdQl010KPGMs2YzXRn0oa49eyjUea+9t/5HtZnxS4fR3xrBA5thVCc8SMPEVQxgjLBoYxJwr0IpzpB1KQIqzOJcOb6KGKP2yunGmrV2BWrwIPZ42Hc45P8Sr7g83jExyHFhz5hTPg+RYAEoSf1BPd1giPjd5yQ2Yota4XzNUGnJPRibmiM03hnMC4qz4u1ezcbj7aUxM7YTdOENL14rpcMeVYgzwsURQkhajR1i6ZpqXHvY9t06NqNljRyhpAWy+I0pCmLtcjKCvHlioQJo+SCM5Gjere/T1jm2mk6dOLIRNEZWZZDKbZLowbiohwGSCkx6Bm9tpgWu6VZ1xe4x1qe0BiD8BQhCE8IjieUVYWeCVyLW+w8vRuv0cLMTwl/PatP6I7Z9hI19RDUaJrnv4/w+ja+5ZkJpNwEdy1ulexvWD1/TCh5M/aPEY5sN44T72wlBAs0nqoSqOsGJY1z+4LUbv8W27aB6CeO0bq5PFPkXGwj0LN1N0auWicHGqP+6T57DdeVQuvNTefwwoGyTNgPdFrpV46+bcZzQjc2PGpRD/7o9RumvNSJDq+bnq7wstg79m4KfxNfChyCEOExQsoBz3lLLpzJq4O3JrvdnDQXSIqeE9H7seooUX/Dmev/vnxlZp59xcVraIiP5nm97S9Q0+b00yy+dvknp/olgoLxOSMAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"GitHub Pages configuration\"\n        title=\"GitHub Pages configuration\"\n        src=\"/static/c4bef497c55e97e92d8b3632688d362c/fcda8/gh_pages.png\"\n        srcset=\"/static/c4bef497c55e97e92d8b3632688d362c/12f09/gh_pages.png 148w,\n/static/c4bef497c55e97e92d8b3632688d362c/e4a3f/gh_pages.png 295w,\n/static/c4bef497c55e97e92d8b3632688d362c/fcda8/gh_pages.png 590w,\n/static/c4bef497c55e97e92d8b3632688d362c/efc66/gh_pages.png 885w,\n/static/c4bef497c55e97e92d8b3632688d362c/c83ae/gh_pages.png 1180w,\n/static/c4bef497c55e97e92d8b3632688d362c/78363/gh_pages.png 1522w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>Today, I had the inclination to try replicating my manual build process with <a href=\"https://github.com/features/actions\">GitHub Actions</a>,\nGitHub’s workflow automation feature. I hadn’t used Actions before, so I thought this would be a good place to start.</p>\n<p>I modified the default Node.js action to create <a href=\"https://github.com/craigpalermo/craigpalermo.com/blob/master/.github/workflows/main.yml\">this simple workflow</a>.\nIt performs the following steps whenever <code class=\"language-text\">master</code> changes:</p>\n<ol>\n<li>Checks out the repo</li>\n<li>Installs NPM dependencies and Gatsby</li>\n<li>Builds Gatsby static site</li>\n<li>Commits changes (thanks to this <a href=\"https://github.com/marketplace/actions/add-commit\">marketplace action</a>)</li>\n</ol>\n<p><a href=\"https://github.com/gitname/react-gh-pages/issues/19#issuecomment-436148409\">This answer</a> also explained why my\ncustom domain kept resetting and provided a simple fix that I could add to the <code class=\"language-text\">npm build</code> script.</p>\n<p>Although I’ve only just started using GitHub Actions, I’m pleasantly surprised by how easy it makes setting up\na simple cloud CI environment with almost no configuration. Its email notifications sent to your GitHub\naccount email are also a nice way to receive updates about your build status.</p>\n<p>Now I’ll never have to worry about where this site is hosted or how it’s deployed; all I have to do is push\nchanges to the Markdown or React content and GitHub takes care of the rest, all for free!</p>",
        "frontmatter": {
          "title": "Building Gatsby with GitHub Pages and Actions",
          "date": "March 15, 2020"
        }
      }
    },
    "pageContext": {
      "slug": "/building-this-site-with-github-actions/",
      "previous": {
        "fields": { "slug": "/nows-more-than-ever/" },
        "frontmatter": { "title": "Now's More Than Ever" }
      },
      "next": {
        "fields": { "slug": "/monorepo-priceline/" },
        "frontmatter": { "title": "Monorepo at Priceline" }
      }
    }
  }
}
